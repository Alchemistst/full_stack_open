(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),u=t(14),o=t.n(u),c=t(2),s=t(3),i=t.n(s),l="http://localhost:3001/api/persons",m=function(){return i.a.get(l).then((function(e){return e.data}))},d=function(e){return i.a.post(l,e).then((function(e){return e.data}))},f=function(e){return i.a.delete(l.concat("/"+e)).then((function(e){return e}))},h=function(e,n){return i.a.put(l.concat("/"+e),n).then((function(e){return e.data})).catch((function(e){return alert("Something went wrong. "+e)}))},p=t(4),b=function(e,n){e(n.target.value)},g=function(e){var n=e.persons,t=e.setPersons,r=e.newName,u=e.setNewName,o=e.newNumber,c=e.setNewNumber,s=e.setMessage;return a.a.createElement("div",null,a.a.createElement("h2",null,"Add new"),a.a.createElement("form",null,a.a.createElement("div",null,"Name: ",a.a.createElement("input",{value:r,onChange:function(e){return b(u,e)}})),a.a.createElement("div",null,"Number: ",a.a.createElement("input",{value:o,onChange:function(e){return b(c,e)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault();var a={name:r,number:o},i=n.find((function(e){return e.name===r}));i?window.confirm("".concat(r," is already added to phonebook. Replace old number?"))&&h(i.id,a).then((function(e){var r=Object(p.a)(n);r[n.indexOf(i)]=e,t(r),u(""),c(""),s({mes:e.name+" has been updated.",err:"message"}),setTimeout((function(){return s("")}),5e3)})).catch((function(e){s({mes:e,err:"error"}),setTimeout((function(){return s("")}),5e3)})):d(a).then((function(e){t(n.concat(e)),u(""),c(""),s({mes:e.name+" has been added.",err:"message"}),setTimeout((function(){return s("")}),5e3)})).catch((function(e){s({mes:e.response.data.error,err:"error"}),setTimeout((function(){return s("")}),5e3)}))}},"add"))))},E=function(e){var n=e.person,t=e.handleDelete;return a.a.createElement("div",null,n.name," ",n.number," ",a.a.createElement("button",{onClick:function(){return t(n)}},"delete"))},v=function(e){var n=e.persons,t=e.setPersons,r=e.newSearch,u=e.setMessage,o=function(e){window.confirm("Are you sure you want to delete '".concat(e.name,"'?"))&&f(e.id).then((function(){var r=n.find((function(n){return n===e})),a=Object(p.a)(n);a.splice(n.indexOf(r),1),t(a),u({mes:e.name+" has been deleted.",err:"message"}),setTimeout((function(){return u("")}),5e3)})).catch((function(n){u({mes:e.name+" has already been removed from server.",err:"error"}),setTimeout((function(){return u("")}),5e3)}))};return a.a.createElement("div",null,a.a.createElement("h2",null,"Contacts"),function(){if(""===r)return n.map((function(e){return a.a.createElement(E,{key:e.id,person:e,handleDelete:o})}));var e=new RegExp(r,"i");return n.filter((function(n){return e.test(n.name)})).map((function(e){return a.a.createElement(E,{key:e.id,person:e,handleDelete:o})}))}())},w=function(e){var n=e.newSearch,t=e.setNewSearch;return a.a.createElement("div",null,"Search: ",a.a.createElement("input",{value:n,onChange:function(e){return b(t,e)}}))},S=function(e){var n=e.message,t={};return null===n.mes?null:("error"===n.err?t={color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}:"message"===n.err&&(t={color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}),a.a.createElement("div",{style:t},n.mes))},N=function(){var e=Object(r.useState)([]),n=Object(c.a)(e,2),t=n[0],u=n[1],o=Object(r.useState)(""),s=Object(c.a)(o,2),i=s[0],l=s[1],d=Object(r.useState)(""),f=Object(c.a)(d,2),h=f[0],p=f[1],b=Object(r.useState)(""),E=Object(c.a)(b,2),N=E[0],O=E[1],j=Object(r.useState)({mes:"",err:""}),y=Object(c.a)(j,2),k=y[0],x=y[1];return Object(r.useEffect)((function(){m().then((function(e){return u(e)}))}),[]),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(S,{message:k}),a.a.createElement(w,{newSearch:N,setNewSearch:O}),a.a.createElement(g,{persons:t,setPersons:u,newName:i,setNewName:l,newNumber:h,setNewNumber:p,setMessage:x}),a.a.createElement(v,{persons:t,setPersons:u,newSearch:N,setMessage:x}))};o.a.render(a.a.createElement(N,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.74e9529d.chunk.js.map