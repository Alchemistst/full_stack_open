{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Javi\\\\Documents\\\\GitHub\\\\full_stack_open\\\\part2\\\\phonebook\\\\src\\\\components\\\\NewName.js\";\nimport React from 'react';\nimport contactsService from '../services/contacts';\nimport handleTyping from '../helpers/handleTyping'; //NewName components provides functionality for creating new contacts.\n\nconst NewName = ({\n  persons,\n  setPersons,\n  newName,\n  setNewName,\n  newNumber,\n  setNewNumber,\n  setMessage\n}) => {\n  //handleSend updates the state of person so the newName typed is added\n  const handleSend = event => {\n    event.preventDefault(); //Prevents contacts for being stored empty\n\n    if (newName.length * newNumber.length === 0) {\n      window.alert(\"Missing fields.\");\n      return;\n    } //Set new person\n\n\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }; //Updates contacts that already exist\n\n    const match = persons.find(person => person.name === newName);\n\n    if (match) {\n      if (window.confirm(\"\".concat(newName, \" is already added to phonebook. Replace old number?\"))) {\n        contactsService.updateNumber(match.id, personObject).then(updatedPerson => {\n          //Updated person is added to the state\n          const updatedPersons = [...persons];\n          updatedPersons[persons.indexOf(match)] = updatedPerson;\n          setPersons(updatedPersons); //Restore defaults for fields\n\n          setNewName('');\n          setNewNumber(''); //Notify user\n\n          setMessage({\n            mes: updatedPerson.name + \" has been updated.\",\n            err: 'message'\n          });\n          setTimeout(() => setMessage(''), 5000);\n        }).catch(err => {\n          //Notify user\n          setMessage({\n            mes: err,\n            err: 'error'\n          });\n          setTimeout(() => setMessage(''), 5000);\n        });\n      }\n\n      return;\n    } //Send new person to server\n\n\n    contactsService.newContact(personObject).then(newPerson => {\n      //New person is added to the state\n      setPersons(persons.concat(newPerson)); //Restore defaults for fields\n\n      setNewName('');\n      setNewNumber(''); //Notify user\n\n      setMessage({\n        mes: newPerson.name + \" has been added.\",\n        err: 'message'\n      });\n      setTimeout(() => setMessage(''), 5000);\n    }).catch(err => alert(\"Something went wrong. \" + err));\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"Add new\"), React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Name: \", React.createElement(\"input\", {\n    value: newName,\n    onChange: e => handleTyping(setNewName, e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"Number: \", React.createElement(\"input\", {\n    value: newNumber,\n    onChange: e => handleTyping(setNewNumber, e),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleSend,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"add\"))));\n};\n\nexport default NewName;","map":{"version":3,"sources":["C:/Users/Javi/Documents/GitHub/full_stack_open/part2/phonebook/src/components/NewName.js"],"names":["React","contactsService","handleTyping","NewName","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setMessage","handleSend","event","preventDefault","length","window","alert","personObject","name","number","match","find","person","confirm","updateNumber","id","then","updatedPerson","updatedPersons","indexOf","mes","err","setTimeout","catch","newContact","newPerson","concat","e"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport contactsService from '../services/contacts'\r\nimport handleTyping from '../helpers/handleTyping'\r\n\r\n\r\n//NewName components provides functionality for creating new contacts.\r\n\r\nconst NewName = ({persons, setPersons, newName, setNewName, newNumber, setNewNumber, setMessage}) =>{\r\n    //handleSend updates the state of person so the newName typed is added\r\n    const handleSend = (event) => {\r\n      event.preventDefault()\r\n\r\n      //Prevents contacts for being stored empty\r\n      if (newName.length * newNumber.length === 0) {\r\n        window.alert(\"Missing fields.\")  \r\n        return\r\n      }\r\n\r\n      //Set new person\r\n      const personObject = {\r\n        name: newName,\r\n        number: newNumber\r\n      }\r\n\r\n\r\n      //Updates contacts that already exist\r\n      const match = persons.find(person => person.name === newName)\r\n      if (match){\r\n          if(window.confirm(`${newName} is already added to phonebook. Replace old number?`)){\r\n            contactsService\r\n            .updateNumber(match.id, personObject)\r\n            .then(updatedPerson =>{\r\n              //Updated person is added to the state\r\n              const updatedPersons = [...persons]\r\n              updatedPersons[persons.indexOf(match)] = updatedPerson\r\n              setPersons(updatedPersons)\r\n    \r\n              //Restore defaults for fields\r\n              setNewName('')\r\n              setNewNumber('')\r\n\r\n              //Notify user\r\n              setMessage(\r\n                {\r\n                  mes : updatedPerson.name + \" has been updated.\",\r\n                  err: 'message'\r\n                })\r\n              \r\n              setTimeout(() =>\r\n                setMessage('')\r\n                , 5000\r\n              )\r\n            })\r\n            .catch(err => {\r\n              //Notify user\r\n              setMessage(\r\n                {\r\n                  mes : err,\r\n                  err: 'error'\r\n                })\r\n              \r\n              setTimeout(() =>\r\n                setMessage('')\r\n                , 5000\r\n              )\r\n            })\r\n          }\r\n          return\r\n      }\r\n\r\n     \r\n      //Send new person to server\r\n      contactsService\r\n        .newContact(personObject)\r\n        .then(newPerson =>{\r\n          //New person is added to the state\r\n          setPersons(persons.concat(newPerson))\r\n\r\n          //Restore defaults for fields\r\n          setNewName('')\r\n          setNewNumber('')\r\n\r\n          //Notify user\r\n          setMessage(\r\n            {\r\n              mes : newPerson.name + \" has been added.\",\r\n              err: 'message'\r\n            })\r\n          \r\n          setTimeout(() =>\r\n            setMessage('')\r\n            , 5000\r\n          )\r\n          \r\n        })\r\n        .catch(err => alert(\"Something went wrong. \"+err))\r\n      \r\n  }\r\n\r\n  return(\r\n    <div>\r\n      <h2>Add new</h2>\r\n      <form>\r\n            <div>\r\n              Name: <input value={newName} onChange={(e) => handleTyping(setNewName, e)}/>\r\n            </div>\r\n            <div>\r\n              Number: <input value={newNumber} onChange={(e) => handleTyping(setNewNumber, e)}/>\r\n            </div>\r\n            <div>\r\n              <button type=\"submit\" onClick={handleSend}>add</button>\r\n            </div>\r\n          </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NewName"]},"metadata":{},"sourceType":"module"}